{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Evaluation Context Protocol (ECP)","text":"<p>ECP is a lightweight protocol and reference runtime for evaluating agents with public output, private reasoning, and tool usage.</p> <p>It gives you a standard way to run deterministic evaluations without changing your production agent code.</p>"},{"location":"#why-ecp-exists","title":"Why ECP exists","text":"<p>Most agent evaluations only check the final answer. That is not enough for safety or reliability.</p> <p>Common gaps:</p> <ul> <li>Did the agent use the right tool or hallucinate data?</li> <li>Did it follow policy internally before responding?</li> <li>Did it reason correctly even if the final answer looks right?</li> </ul> <p>ECP solves this by separating public output (what users see) from private reasoning and tool calls (what evaluators need to verify). The runtime can then grade each aspect explicitly.</p>"},{"location":"#what-you-get","title":"What you get","text":"<ul> <li>A simple JSON-RPC protocol over stdio</li> <li>A reference runtime to execute manifests and graders</li> <li>Optional HTML report output for sharing results</li> <li>A Python SDK to wrap agents quickly</li> <li>Minimal examples to copy and modify</li> </ul>"},{"location":"#example-langchain-agent-manifest","title":"Example (LangChain Agent + Manifest)","text":"<p>Agent:</p> <pre><code>from langchain.agents import create_agent\nfrom langchain_openai import ChatOpenAI\nfrom langchain_core.tools import tool\nfrom ecp import serve\nfrom ecp.adaptors.langchain import ECPLangChainAdapter\n\n@tool\ndef calculator(expression: str) -&gt; str:\n    allowed = set(\"0123456789+-*/() \")\n    if not expression or any(ch not in allowed for ch in expression):\n        return \"Invalid expression.\"\n    try:\n        return str(int(eval(expression, {\"__builtins__\": {}})))\n    except Exception:\n        return \"Invalid expression.\"\n\nagent = create_agent(\n    model=ChatOpenAI(model=\"gpt-3.5-turbo\", temperature=0),\n    tools=[calculator],\n    system_prompt=\"Use the calculator tool for arithmetic.\"\n)\n\ndef to_messages(text: str):\n    return {\"messages\": [{\"role\": \"user\", \"content\": text}]}\n\nserve(ECPLangChainAdapter(agent, name=\"MathBot\", input_mapper=to_messages))\n</code></pre> <p>Manifest:</p> <pre><code>manifest_version: \"v1\"\nname: \"LangChain Math Check\"\ntarget: \"python agent.py\"\n\nscenarios:\n  - name: \"Ratio Word Problem\"\n    steps:\n      - input: \"Katy makes coffee using teaspoons of sugar and cups of water in the ratio of 7:13...\"\n        graders:\n          - type: text_match\n            field: public_output\n            condition: contains\n            value: \"42\"\n          - type: tool_usage\n            tool_name: \"calculator\"\n            arguments: {}\n</code></pre>"},{"location":"#what-is-in-this-repo","title":"What is in this repo","text":"<ul> <li>Python SDK: <code>sdk/python/src/ecp</code></li> <li>Runtime CLI: <code>runtime/python/src/ecp_runtime</code></li> <li>Examples: <code>examples/langchain_demo</code></li> <li>Protocol spec: <code>spec/protocol.md</code></li> </ul> <p>Go to Quickstart to run the demo, or Specification to implement the protocol in another language.</p>"},{"location":"quickstart/","title":"Quickstart","text":""},{"location":"quickstart/#1-create-a-venv-and-install-from-pypi","title":"1. Create a venv and install from PyPI","text":"<pre><code>py -m venv .venv\n.\\.venv\\Scripts\\Activate.ps1\npip install ecp-runtime \"ecp-sdk[langchain]\" langchain-openai\n</code></pre>"},{"location":"quickstart/#2-run-the-demo","title":"2. Run the demo","text":"<pre><code>python -m ecp_runtime.cli run --manifest .\\examples\\langchain_demo\\manifest.yaml\n</code></pre>"},{"location":"quickstart/#3-generate-an-html-report","title":"3. Generate an HTML report","text":"<pre><code>python -m ecp_runtime.cli run --manifest .\\examples\\langchain_demo\\manifest.yaml --report .\\report.html\n</code></pre>"},{"location":"quickstart/#4-json-output-for-ci","title":"4. JSON output (for CI)","text":"<p>Print a JSON report to stdout:</p> <pre><code>python -m ecp_runtime.cli run --manifest .\\examples\\langchain_demo\\manifest.yaml --json\n</code></pre> <p>Save a JSON report to a file:</p> <pre><code>python -m ecp_runtime.cli run --manifest .\\examples\\langchain_demo\\manifest.yaml --json-out .\\report.json\n</code></pre>"},{"location":"quickstart/#5-optional-enable-llm-judge","title":"5. Optional: enable LLM judge","text":"<p>If your manifest uses <code>llm_judge</code>, set the API key:</p> <pre><code>$env:OPENAI_API_KEY=\"your_key_here\"\n</code></pre>"},{"location":"quickstart/#notes","title":"Notes","text":"<ul> <li>The runtime launches your agent via the <code>target</code> command in the manifest.</li> <li>The agent responds over JSON-RPC 2.0 on stdio.</li> <li>Use <code>ECP_RPC_TIMEOUT</code> to control step timeouts (default 30s).</li> </ul>"},{"location":"spec/","title":"Specification","text":""},{"location":"spec/#overview","title":"Overview","text":"<p>ECP is JSON-RPC 2.0 over stdio. The runtime spawns the agent process and sends requests for <code>initialize</code>, <code>step</code>, and <code>reset</code>. The agent returns structured results containing public output, private reasoning, and tool usage.</p>"},{"location":"spec/#methods","title":"Methods","text":""},{"location":"spec/#agentinitialize","title":"agent/initialize","text":"<p>Params: <code>config</code> (object, optional)</p> <p>Result: <code>{ name, capabilities }</code></p>"},{"location":"spec/#agentstep","title":"agent/step","text":"<p>Params: <code>input</code> (string)</p> <p>Result:</p> <ul> <li><code>status</code>: <code>done</code> or <code>paused</code></li> <li><code>public_output</code>: string or null</li> <li><code>private_thought</code>: string or null</li> <li><code>tool_calls</code>: array or null</li> </ul> <p>Tool call format:</p> <pre><code>{ \"name\": \"calculator\", \"arguments\": { \"expression\": \"2+2\" } }\n</code></pre>"},{"location":"spec/#agentreset","title":"agent/reset","text":"<p>Params: none</p> <p>Result: <code>true</code></p>"},{"location":"spec/#manifest","title":"Manifest","text":"<p>The runtime reads a YAML manifest describing scenarios and graders.</p> <p>Supported graders:</p> <ul> <li><code>text_match</code> (contains, equals, does_not_contain, regex)</li> <li><code>llm_judge</code> (requires <code>OPENAI_API_KEY</code>)</li> <li><code>tool_usage</code> (name + argument subset match)</li> </ul> <p>See <code>examples/langchain_demo/manifest.yaml</code> for a minimal example.</p>"},{"location":"spec/#reports","title":"Reports","text":"<p>The runtime can optionally generate a single HTML report for a run:</p> <pre><code>python -m ecp_runtime.cli run --manifest .\\examples\\langchain_demo\\manifest.yaml --report .\\report.html\n</code></pre> <p>The runtime can also emit a JSON report (useful for CI):</p> <pre><code>python -m ecp_runtime.cli run --manifest .\\examples\\langchain_demo\\manifest.yaml --json\n</code></pre>"}]}